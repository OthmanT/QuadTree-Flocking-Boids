Flock flock;
ArrayList<Predator> predators = new ArrayList<Predator>();

QuadTree qtree;
void setup() {
  //size(800, 600, P2D);
  fullScreen(P2D);
  flock = new Flock(2000);

  predators.add(new Predator());
}

void mousePressed() {
  //predators.add(new Predator(new PVector(mouseX, mouseY)));
}

void keyPressed(){
  if (key == '1') {
    frameRate(1);
  }
  if(key == ' '){
    frameRate(60);
  }
}

void draw() {
  background(51);



  qtree = new QuadTree(new Rectangle(width/2, height/2, width, height), 4);
  for (Boid boid : flock.boids) {
    qtree.insert(new Point(boid.position.x, boid.position.y, boid));
  }

  qtree.show();
  
  rectMode(CENTER);
  stroke(0,255,0);
  noFill();
  flock.display();

  //if (frameRate < 50) {
  //  flock.boids.remove(flock.boids.size()-1);
  //}
  //if (frameRate > 50) {
  //  flock.boids.add(new Boid());
  //}

  for (Predator predator : predators) {
    predator.wrapAround();
    predator.update();
    predator.lookForward();
    predator.display();
  }

  drawUI();
}

void drawUI() {
  fill(10);
  noStroke();

  rectMode(CORNER);
  rect(0, 0, width, 20);
  rect(0, height-20, width, 20);

  fill(255);
  textAlign(RIGHT, CENTER);
  text((int)frameRate + " fps", width, 10);

  text(flock.boids.size() + " boids", width - 45, 10);
}
